<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('partials/head') %>
    <link rel="stylesheet" href="/css/builder.css">
    <link rel="stylesheet" href="/css/theme.css">
</head>
<body>

    <button id="exitPreviewBtn" onclick="togglePreview()">‚ùå Close</button>

    <div class="sidebar">
        <h3>üíç Invitation Builder</h3>
        <div class="section-title">Structure</div>
        
        <button class="tool-btn" onclick="openSelector('hero')">Header Styles</button>
        <button class="tool-btn" onclick="openSelector('text')">Text Paragraph</button>
        <button class="tool-btn" onclick="openSelector('details')">Date & Location</button>
        <button class="tool-btn special-btn" onclick="openSelector('guest')">Add Guest Name</button>
        <button class="tool-btn" onclick="openSelector('image')">üì∑ Add Photo</button>

        <button class="tool-btn save-btn" onclick="saveWork()">Save Design</button>
    </div>

    <div class="workspace">
        <button class="workspace-btn preview-toggle" onclick="togglePreview()">üëÅÔ∏è Preview</button>

        <div id="canvas">
            <div style="padding:20px; text-align:center; color:#999; margin-top:50%;">
                Add blocks from the left to start building...
            </div>
        </div>
    </div>

    <div class="properties-panel" id="propertiesPanel">
        <h3>üé® Edit Style</h3>
        <p class="hint-text">Click a block to edit properties</p>
        
        <div id="imageControls" style="display:none; border-bottom: 1px solid #444; padding-bottom: 20px; margin-bottom: 20px;">
            <label>Change Image</label>
            <p class="hint-text">Upload a photo to replace this image.</p>
            <input type="file" id="imageInput" accept="image/*" style="width: 100%; margin-top: 5px;">
            
            <div class="control-group" style="margin-top: 15px;">
                <label>Width</label>
                <input type="range" id="imgWidthInput" min="10" max="100" value="100">
            </div>
            
            <div class="control-group">
                <label>Border Radius</label>
                <input type="range" id="imgRadiusInput" min="0" max="50" value="0">
            </div>
        </div>

        <div id="textControls" style="display:none;">
            <div class="control-group">
                <label>Text Color</label>
                <div class="color-input-wrapper">
                    <input type="color" id="colorInput">
                    <span id="colorValue">#000000</span>
                </div>
            </div>

            <div class="control-group">
                <label>Background</label>
                <div class="color-input-wrapper">
                    <input type="color" id="bgColorInput">
                    <span id="bgColorValue">#ffffff</span>
                </div>
            </div>

            <div class="control-group">
                <label>Padding (Space)</label>
                <input type="range" id="paddingInput" min="0" max="60" value="20">
            </div>

            <div class="control-group">
                <label>Alignment</label>
                <div class="btn-group">
                    <button class="align-btn" data-align="left">L</button>
                    <button class="align-btn" data-align="center">C</button>
                    <button class="align-btn" data-align="right">R</button>
                </div>
            </div>

            <div class="control-group">
                <label>Font Size</label>
                <select id="fontSizeInput">
                    <option value="16px">Small</option>
                    <option value="18px">Normal</option>
                    <option value="24px">Medium</option>
                    <option value="32px">Large</option>
                    <option value="48px">Huge</option>
                </select>
            </div>
            
            <div class="control-group" style="margin-top: 20px; border-top: 1px solid #444; padding-top: 10px;">
                <button class="tool-btn delete-btn" id="deleteBlockBtn">üóëÔ∏è Delete Block</button>
            </div>
        </div>
    </div>

    <div id="templateModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Choose a Style</h2>
                <span class="close-btn" onclick="closeModal()">&times;</span>
            </div>
            <div id="templateGrid" class="template-grid"></div>
        </div>
    </div>

    <script type="module" src="/js/app.js"></script>
</body>
</html>